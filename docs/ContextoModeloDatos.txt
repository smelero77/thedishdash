üìò MODELO DE DATOS DOCUMENTADO ‚Äì GOURMETON

host:
db.kgmacxloazibdyduucgp.supabase.co

port:
5432

database:
postgres

user:
postgres




üü¶ categories
Tabla que almacena las categor√≠as del men√∫, como "Entrantes", "Platos principales", "Bebidas", etc.

Campo	Tipo	Descripci√≥n
id	UUID (PK)	Identificador √∫nico de la categor√≠a.
name	TEXT	Nombre visible de la categor√≠a.
sort_order	INTEGER	Orden de visualizaci√≥n.
created_at	TIMESTAMP	Fecha de creaci√≥n.
updated_at	TIMESTAMP	Fecha de √∫ltima modificaci√≥n.
created_by	UUID	Usuario que cre√≥ la categor√≠a.
updated_by	UUID	√öltimo usuario que la modific√≥.

üü© menu_items
Tabla principal de productos (platos, bebidas...). Cada √≠tem representa un producto en la carta.

Campo	Tipo	Descripci√≥n
id	UUID (PK)	Identificador √∫nico del producto.
name	TEXT	Nombre del plato.
description	TEXT	Descripci√≥n corta del producto.
price	NUMERIC	Precio base del producto.
image_url	TEXT	URL de la imagen (almacenada en Supabase Storage).
category_id	UUID (FK)	Relaci√≥n con categories.
food_info	TEXT	Informaci√≥n nutricional e ingredientes.
origin	TEXT	Origen geogr√°fico o cultural del plato.
pairing_suggestion	TEXT	Recomendaci√≥n de maridaje.
chef_notes	TEXT	Comentario del chef o historia del plato.
is_recommended	BOOLEAN	Indica si es una sugerencia destacada.
created_at	TIMESTAMP	Fecha de creaci√≥n.
updated_at	TIMESTAMP	√öltima modificaci√≥n.
created_by	UUID	Usuario que lo cre√≥.
updated_by	UUID	Usuario que lo modific√≥.

üü® allergens
Lista general de al√©rgenos reconocidos (gluten, l√°cteos, frutos secos...).

Campo	Tipo	Descripci√≥n
id	UUID (PK)	ID del al√©rgeno.
name	TEXT	Nombre del al√©rgeno.
created_at	TIMESTAMP	Fecha de creaci√≥n.
updated_at	TIMESTAMP	√öltima modificaci√≥n.
created_by	UUID	Usuario que lo cre√≥.
updated_by	UUID	Usuario que lo modific√≥.

üü• menu_item_allergens
Relaci√≥n N:N entre productos (menu_items) y al√©rgenos (allergens).

Campo	Tipo	Descripci√≥n
menu_item_id	UUID (FK)	ID del producto.
allergen_id	UUID (FK)	ID del al√©rgeno.
created_at	TIMESTAMP	Fecha de asignaci√≥n.
created_by	UUID	Usuario que asign√≥.

üüß diet_tags
Tabla de etiquetas alimentarias (ej: "Vegano", "Vegetariano", "Sin gluten").

Campo	Tipo	Descripci√≥n
id	UUID (PK)	Identificador de la etiqueta.
name	TEXT	Nombre visible de la etiqueta.
created_at	TIMESTAMP	Fecha de creaci√≥n.
updated_at	TIMESTAMP	√öltima modificaci√≥n.
created_by	UUID	Usuario que lo cre√≥.
updated_by	UUID	Usuario que lo modific√≥.

üü™ menu_item_diet_tags
Relaci√≥n N:N entre productos y etiquetas diet√©ticas.

Campo	Tipo	Descripci√≥n
menu_item_id	UUID (FK)	ID del producto.
diet_tag_id	UUID (FK)	ID de la etiqueta diet√©tica.
created_at	TIMESTAMP	Fecha de asignaci√≥n.
created_by	UUID	Usuario que asign√≥.

üü´ modifiers
Grupo de modificadores asociados a un producto (ej: ‚ÄúPunto de cocci√≥n‚Äù, ‚ÄúTipo de pan‚Äù, ‚ÄúExtras‚Äù).

Campo	Tipo	Descripci√≥n
id	UUID (PK)	Identificador del grupo de opciones.
name	TEXT	Nombre del grupo (visible en el frontend).
menu_item_id	UUID (FK)	Producto al que pertenece.
required	BOOLEAN	Si es obligatorio seleccionar una opci√≥n.
created_at	TIMESTAMP	Fecha de creaci√≥n.
updated_at	TIMESTAMP	√öltima modificaci√≥n.
created_by	UUID	Usuario que lo cre√≥.
updated_by	UUID	Usuario que lo modific√≥.

üü¶ modifier_options
Opciones dentro de un grupo (ej: ‚ÄúAl punto‚Äù, ‚ÄúPoco hecho‚Äù, ‚ÄúCon cebolla‚Äù).

Campo	Tipo	Descripci√≥n
id	UUID (PK)	ID √∫nico.
modifier_id	UUID (FK)	Grupo al que pertenece.
name	TEXT	Nombre visible.
extra_price	NUMERIC	Coste adicional, si aplica.
is_default	BOOLEAN	Si es la opci√≥n por defecto.
created_at	TIMESTAMP	Fecha de creaci√≥n.
updated_at	TIMESTAMP	√öltima modificaci√≥n.
created_by	UUID	Usuario que la cre√≥.
updated_by	UUID	Usuario que la modific√≥.

üüß related_items
Art√≠culos complementarios relacionados con un producto (ej: pan, salsa, guarnici√≥n), con o sin coste adicional.

Campo	Tipo	Descripci√≥n
id	UUID (PK)	ID √∫nico.
menu_item_id	UUID (FK)	Producto base.
related_menu_item_id	UUID (FK)	Producto relacionado.
extra_price	NUMERIC	Precio extra (puede ser 0).
optional	BOOLEAN	Si el cliente puede no elegirlo.
created_at	TIMESTAMP	Fecha de relaci√≥n.
updated_at	TIMESTAMP	√öltima modificaci√≥n.
created_by	UUID	Usuario que lo cre√≥.
updated_by	UUID	Usuario que lo modific√≥.

-- üßæ Categor√≠as de productos
CREATE TABLE categories (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  sort_order INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT now(),
  updated_at TIMESTAMP DEFAULT now(),
  created_by UUID,
  updated_by UUID
);

-- üçΩÔ∏è Platos / productos del men√∫
CREATE TABLE menu_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  description TEXT,
  price NUMERIC(6,2) NOT NULL,
  image_url TEXT,
  category_id UUID REFERENCES categories(id) ON DELETE SET NULL,
  food_info TEXT,
  origin TEXT,
  pairing_suggestion TEXT,
  chef_notes TEXT,
  is_recommended BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT now(),
  updated_at TIMESTAMP DEFAULT now(),
  created_by UUID,
  updated_by UUID
);

-- üß™ Al√©rgenos
CREATE TABLE allergens (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT now(),
  updated_at TIMESTAMP DEFAULT now(),
  created_by UUID,
  updated_by UUID
);

-- üîó Relaci√≥n N:N entre platos y al√©rgenos
CREATE TABLE menu_item_allergens (
  menu_item_id UUID REFERENCES menu_items(id) ON DELETE CASCADE,
  allergen_id UUID REFERENCES allergens(id) ON DELETE CASCADE,
  PRIMARY KEY (menu_item_id, allergen_id),
  created_at TIMESTAMP DEFAULT now(),
  created_by UUID
);

-- üè∑Ô∏è Etiquetas diet√©ticas (Vegano, Sin gluten, etc.)
CREATE TABLE diet_tags (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT now(),
  updated_at TIMESTAMP DEFAULT now(),
  created_by UUID,
  updated_by UUID
);

-- üîó Relaci√≥n N:N entre platos y etiquetas diet√©ticas
CREATE TABLE menu_item_diet_tags (
  menu_item_id UUID REFERENCES menu_items(id) ON DELETE CASCADE,
  diet_tag_id UUID REFERENCES diet_tags(id) ON DELETE CASCADE,
  PRIMARY KEY (menu_item_id, diet_tag_id),
  created_at TIMESTAMP DEFAULT now(),
  created_by UUID
);

-- ‚öôÔ∏è Grupos de modificadores (Extras, Tipo de cocci√≥n, Formato, etc.)
CREATE TABLE modifiers (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  menu_item_id UUID REFERENCES menu_items(id) ON DELETE CASCADE,
  required BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT now(),
  updated_at TIMESTAMP DEFAULT now(),
  created_by UUID,
  updated_by UUID
);

-- üß© Opciones dentro de cada modificador
CREATE TABLE modifier_options (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  modifier_id UUID REFERENCES modifiers(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  extra_price NUMERIC(6,2) DEFAULT 0.00,
  is_default BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT now(),
  updated_at TIMESTAMP DEFAULT now(),
  created_by UUID,
  updated_by UUID
);

-- üîÅ Art√≠culos relacionados (pan, salsas, guarniciones, etc.)
CREATE TABLE related_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  menu_item_id UUID REFERENCES menu_items(id) ON DELETE CASCADE,
  related_menu_item_id UUID REFERENCES menu_items(id),
  extra_price NUMERIC(6,2),
  optional BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT now(),
  updated_at TIMESTAMP DEFAULT now(),
  created_by UUID,
  updated_by UUID
);
